<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ByteShalaStudio - AI Powered Compiler</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- External Icon Fonts -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/devicon.min.css">

    <!-- Code Highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-clike.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-jsx.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup-templating.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-php.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-c.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-cpp.min.js"></script>

    <link
        href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Plus+Jakarta+Sans:wght@300;400;600;700&display=swap"
        rel="stylesheet">

    <style>
        :root {
            --bg-dark: #020617;
            --panel-bg: #0f172a;
            --active-accent: #3b82f6;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg-dark);
            color: #f8fafc;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        #compiler-view {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: 100;
            background: var(--bg-dark);
        }

        .code-font {
            font-family: 'Fira Code', monospace !important;
        }

        .main-nav {
            backdrop-filter: blur(12px);
            background: rgba(2, 6, 23, 0.7);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .glass-card {
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
            overflow: hidden;
        }

        .glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top left, var(--card-accent), transparent 70%);
            opacity: 0;
            transition: opacity 0.4s;
            z-index: 0;
        }

        .glass-card:hover::before {
            opacity: 0.15;
        }

        .glass-card:hover {
            transform: translateY(-8px);
            border-color: var(--card-accent);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .icon-container {
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 22px;
            transition: all 0.4s;
            position: relative;
            z-index: 1;
        }

        @media (min-width: 640px) {
            .icon-container {
                width: 56px;
                height: 56px;
                border-radius: 14px;
                font-size: 28px;
            }
        }

        .glass-card:hover .icon-container {
            transform: scale(1.1) rotate(5deg);
            border-color: var(--card-accent);
        }

        .app-wrapper {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .editor-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        @media (min-width: 1024px) {
            .editor-container {
                flex-direction: row;
            }

            .column-code {
                width: 60%;
                border-right: 1px solid #1e293b;
                border-bottom: none;
            }
        }

        .column-code {
            height: 50%;
            background: var(--panel-bg);
            display: flex;
            flex-direction: column;
            border-bottom: 1px solid #1e293b;
        }

        @media (min-width: 1024px) {
            .column-code {
                height: 100%;
            }
        }

        .column-preview {
            flex: 1;
            background: #020617;
            display: flex;
            flex-direction: column;
            min-height: 200px;
        }

        .resizer {
            display: none;
            width: 4px;
            background: #1e293b;
            cursor: col-resize;
            transition: background 0.2s;
            z-index: 10;
        }

        .resizer:hover {
            background: #3b82f6;
        }

        @media (min-width: 1024px) {
            .resizer {
                display: block;
            }
        }

        .panel-header {
            display: flex;
            background: rgba(15, 23, 42, 0.95);
            border-bottom: 1px solid #1e293b;
            align-items: center;
            height: 40px;
            padding: 0 8px;
            overflow-x: auto;
            scrollbar-width: none;
        }

        .panel-header::-webkit-scrollbar {
            display: none;
        }

        .tab-btn {
            padding: 0 12px;
            height: 100%;
            font-size: 10px;
            font-weight: 700;
            color: #64748b;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .tab-btn.active {
            color: var(--active-accent);
            border-bottom-color: var(--active-accent);
            background: rgba(255, 255, 255, 0.03);
        }

        .editor-content-wrapper {
            flex: 1;
            position: relative;
            background: #0b0f1a;
            overflow: hidden;
        }

        textarea.editor-input,
        .highlight-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 16px !important;
            border: none;
            outline: none;
            font-size: 13px;
            line-height: 1.6;
            white-space: pre;
            word-wrap: normal;
            box-sizing: border-box;
            tab-size: 4;
        }

        textarea.editor-input {
            color: transparent;
            caret-color: white;
            background: transparent;
            z-index: 2;
            resize: none;
            overflow: auto;
        }

        .highlight-layer {
            z-index: 1;
            pointer-events: none;
            overflow: hidden;
        }

        #preview-frame {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
        }

        #terminal-output {
            flex: 1;
            padding: 16px;
            color: #cbd5e1;
            font-family: 'Fira Code', monospace;
            font-size: 12px;
            line-height: 1.6;
            overflow-y: auto;
            white-space: pre-wrap;
            display: none;
        }

        .nav-gradient {
            background: linear-gradient(to right, #020617, #0f172a);
        }

        /* AI Notification Styles */
        #ai-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            padding: 12px 20px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            transform: translateY(100px);
            transition: transform 0.3s ease;
        }

        #ai-status.visible {
            transform: translateY(0);
        }

        .ai-pulse {
            animation: ai-glow 1.5s infinite alternate;
        }

        @keyframes ai-glow {
            from {
                box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
            }

            to {
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.8);
            }
        }
    </style>
</head>

<body>

    <!-- DASHBOARD -->
    <div id="dashboard" class="relative min-h-screen">
        <nav class="main-nav">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 h-16 sm:h-20 flex items-center justify-between">
                <div class="flex items-center gap-2">
                    <div
                        class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg sm:rounded-xl flex items-center justify-center shadow-lg">
                        <span class="text-white font-black text-lg sm:text-xl">BS</span>
                    </div>
                    <span class="text-white font-black text-lg sm:text-xl tracking-tighter">ByteShalaStudio</span>
                </div>

                <div class="hidden md:flex items-center gap-8 text-xs sm:text-sm font-bold text-white/60">
                    <a href="#" class="text-white">Home</a>
                    <a href="#">AI Tools</a>
                    <a href="#">Support</a>
                </div>

                <div class="flex items-center gap-3">
                    <button
                        class="px-4 py-2 rounded-lg sm:rounded-xl bg-white/5 border border-white/10 text-white text-[10px] sm:text-xs font-bold hover:bg-white/10 transition-all">Sign
                        In</button>
                </div>
            </div>
        </nav>

        <div class="relative z-10 text-center pt-10 sm:pt-24 pb-10 sm:pb-20 px-4">
            <div
                class="inline-flex items-center gap-2 px-3 py-1 mb-4 sm:mb-6 rounded-full border border-indigo-500/20 bg-indigo-500/5 text-indigo-400 text-[10px] font-bold uppercase tracking-widest">
                <span class="animate-pulse">●</span> AI Powered IDE
            </div>
            <h1 class="text-3xl sm:text-6xl md:text-8xl font-black text-white mb-2 sm:mb-6 tracking-tighter">
                ByteShala<span
                    class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-purple-500 to-pink-600">Studio</span>
            </h1>
            <p class="text-slate-400 text-[11px] sm:text-lg max-w-2xl mx-auto font-medium px-4">Professional
                multi-language IDE with integrated Gemini AI error fixing.</p>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-6 px-4 sm:px-8 max-w-7xl mx-auto pb-24"
            id="card-grid"></div>

        <footer class="border-t border-white/5 bg-slate-950/50 py-8 text-center px-4">
            <p class="text-slate-500 text-[10px] sm:text-xs font-medium uppercase tracking-widest">© 2026
                ByteShalaStudio • AI Powered Development</p>
        </footer>
    </div>

    <!-- COMPILER VIEW -->
    <div id="compiler-view">
        <div class="app-wrapper">
            <nav
                class="h-14 sm:h-16 flex items-center justify-between px-4 sm:px-6 border-b border-slate-800 nav-gradient">
                <div class="flex items-center gap-3 sm:gap-6">
                    <button onclick="goHome()"
                        class="group flex items-center gap-1.5 text-slate-400 hover:text-white transition-all font-bold text-[10px] uppercase tracking-widest">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="3">
                            <path d="m15 18-6-6 6-6" />
                        </svg> <span class="hidden sm:inline">Exit</span>
                    </button>
                    <div class="h-5 w-px bg-slate-800"></div>
                    <div class="flex items-center gap-2 sm:gap-3">
                        <div id="lang-icon-header" class="text-xl sm:text-2xl"></div>
                        <h1 id="lang-label" class="text-[10px] font-black uppercase tracking-widest"></h1>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <!-- Gemini AI Fixer Button -->
                    <button id="aiFixBtn" title="Fix errors with Gemini AI"
                        class="bg-indigo-600 hover:bg-indigo-500 text-white p-2 sm:px-4 sm:py-2 rounded-lg sm:rounded-xl text-[10px] font-black transition-all flex items-center gap-2 ai-pulse">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2.5">
                            <path
                                d="m12 3 1.912 5.886L20 10.8l-5.825 1.914L12 21l-1.912-5.886L4 13.2l5.825-1.914L12 3Z" />
                        </svg>
                        <span class="hidden sm:inline">AI FIXER</span>
                    </button>

                    <button id="downloadBtn" title="Download Source"
                        class="bg-slate-800 hover:bg-slate-700 text-white p-2 sm:px-4 sm:py-2 rounded-lg sm:rounded-xl text-[10px] font-black transition-all flex items-center gap-2">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2.5">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4m4-5 5 5 5-5m-5 5V3" />
                        </svg>
                    </button>

                    <button id="clearBtn" title="Clear All"
                        class="bg-rose-900/40 hover:bg-rose-800 text-rose-200 p-2 sm:px-4 sm:py-2 rounded-lg sm:rounded-xl text-[10px] font-black transition-all flex items-center gap-2">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2.5">
                            <path d="M3 6h18m-2 0v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6m3 0V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" />
                        </svg>
                    </button>

                    <button id="runBtn"
                        class="bg-emerald-600 hover:bg-emerald-500 text-white px-5 sm:px-8 py-2 rounded-lg sm:rounded-xl text-[10px] font-black shadow-xl transition-transform active:scale-95 flex items-center gap-2">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8 5v14l11-7z" />
                        </svg> RUN
                    </button>
                </div>
            </nav>

            <div class="editor-container">
                <div class="column-code" id="left-col">
                    <div class="panel-header" id="compiler-tabs"></div>
                    <div class="editor-content-wrapper">
                        <div class="highlight-layer">
                            <pre><code id="codeHighlight" class="code-font"></code></pre>
                        </div>
                        <textarea id="editor" class="editor-input code-font" spellcheck="false" wrap="off"></textarea>
                    </div>
                </div>
                <div class="resizer" id="drag-bar"></div>
                <div class="column-preview">
                    <div class="panel-header bg-slate-900 border-t border-slate-800 lg:border-t-0">
                        <span id="output-type-label"
                            class="text-[9px] font-bold text-slate-500 uppercase tracking-widest">Preview</span>
                    </div>
                    <div class="flex-1 relative overflow-hidden">
                        <iframe id="preview-frame"></iframe>
                        <div id="terminal-output"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Notification -->
    <div id="ai-status" class="bg-indigo-600 text-white shadow-2xl">
        <span id="ai-status-text">Processing...</span>
    </div>

    <script>
        const apiKey = "";
        const projectData = {
            html: { label: 'HTML5', color: '#E34F26', icon: 'devicon-html5-plain colored', type: 'web', lang: 'html', files: { 'index.html': "<!DOCTYPE html>\n<html>\n<meta name='viewport' content='width=device-width, initial-scale=1'>\n<body style='text-align:center; padding:50px 20px; font-family:sans-serif;'>\n  <h1 style='color:#E34F26;'>ByteShalaStudio HTML</h1>\n  <p>Live Web View</p>\n</body>\n</html>" } },
            css: { label: 'CSS3', color: '#1572B6', icon: 'devicon-css3-plain colored', type: 'web', lang: 'css', files: { 'styles.css': "body {\n  background: #f8fafc;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  margin: 0;\n  font-family: sans-serif;\n}\n\n.box {\n  width: 200px;\n  height: 200px;\n  background: #1572B6;\n  border-radius: 20px;\n  box-shadow: 0 10px 20px rgba(0,0,0,0.2);\n}" } },
            c: { label: 'C Language', color: '#A8B9CC', icon: 'devicon-c-plain colored', type: 'console', lang: 'c', files: { 'main.c': "#include <stdio.h>\n\nint main() {\n    printf(\"ByteShalaStudio C Runtime Initialized\\n\");\n    return 0;\n}" } },
            cpp: { label: 'C++', color: '#00599C', icon: 'devicon-cplusplus-plain colored', type: 'console', lang: 'cpp', files: { 'main.cpp': "#include <iostream>\nusing namespace std;\n\nint main() {\n    cout << \"ByteShalaStudio C++ Virtual Engine\" << endl;\n    return 0;\n}" } },
            php: { label: 'PHP', color: '#777BB4', icon: 'devicon-php-plain colored', type: 'console', lang: 'php', files: { 'index.php': "<?php\n\necho \"ByteShalaStudio PHP Interpreter Running...\\n\";\n\n?>" } },
            sql: { label: 'MySQL', color: '#4479A1', icon: 'devicon-mysql-plain colored', type: 'console', lang: 'sql', files: { 'query.sql': "CREATE TABLE users (id INT, username TEXT);\nINSERT INTO users VALUES (1, 'ByteShalaUser');\nSELECT * FROM users;" } },
            python: { label: 'Python', color: '#3776AB', icon: 'devicon-python-plain colored', type: 'console', lang: 'python', files: { 'main.py': "print('ByteShalaStudio Python Runtime')\nfor i in range(3):\n    print(f'Syncing environment... {i+1}')" } },
            react: { label: 'React', color: '#61DAFB', icon: 'devicon-react-original colored', type: 'web', lang: 'jsx', files: { 'App.jsx': "export default function App() {\n  return (\n    <div className='p-6 text-center min-h-screen bg-slate-50'>\n      <h1 className='text-2xl font-bold text-sky-500'>ByteShalaStudio</h1>\n      <p className='mt-2 text-slate-600 text-sm'>React Live Environment</p>\n    </div>\n  );\n}" } }
        };

        let currentMode = null;
        let currentFile = null;

        function buildDashboard() {
            const grid = $('#card-grid'); grid.empty();
            // This builds in the order defined in projectData (HTML -> CSS -> C -> CPP -> PHP -> SQL -> Python -> React)
            Object.entries(projectData).forEach(([key, data]) => {
                grid.append(`<div class="glass-card p-4 sm:p-8 rounded-[20px] sm:rounded-[32px] cursor-pointer group animate-float" onclick="launchCompiler('${key}')" style="--card-accent: ${data.color}">
                    <div class="icon-container mb-3 sm:mb-6"><i class="${data.icon}"></i></div>
                    <h3 class="text-base sm:text-2xl font-black text-white mb-0.5 sm:mb-2">${data.label}</h3>
                    <p class="text-slate-400 text-[8px] sm:text-xs font-bold uppercase tracking-widest">Start Project</p>
                </div>`);
            });
        }

        function showAIStatus(text, duration = 3000) {
            const status = $('#ai-status');
            $('#ai-status-text').text(text);
            status.addClass('visible');
            if (duration) setTimeout(() => status.removeClass('visible'), duration);
        }

        async function fixWithAI() {
            const code = $('#editor').val();
            const language = projectData[currentMode].label;
            showAIStatus("Gemini AI analyzing code...", 0);
            const systemPrompt = `You are an expert ${language} code fixer. Fix any errors. Output ONLY the raw corrected code without markdown blocks or comments.`;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: code }] }],
                        systemInstruction: { parts: [{ text: systemPrompt }] }
                    })
                });
                const result = await response.json();
                if (result.candidates) {
                    let fixedCode = result.candidates[0].content.parts[0].text.trim().replace(/^```[a-z]*\n/i, '').replace(/\n```$/i, '');
                    $('#editor').val(fixedCode).trigger('input');
                    showAIStatus("Code Fixed Successfully!");
                }
            } catch (error) { showAIStatus("AI Connection Busy."); }
        }

        function launchCompiler(mode) {
            currentMode = mode;
            const data = projectData[mode];
            document.documentElement.style.setProperty('--active-accent', data.color);
            $('#lang-icon-header').html(`<i class="${data.icon}"></i>`);
            $('#lang-label').text(data.label).css('color', data.color);
            $('#compiler-tabs').empty();
            Object.keys(data.files).forEach((f, i) => {
                if (i === 0) currentFile = f;
                $('#compiler-tabs').append(`<div class="tab-btn ${i === 0 ? 'active' : ''}" data-file="${f}">${f}</div>`);
            });
            $('#dashboard').fadeOut(200, () => {
                $('#compiler-view').show();
                syncEditor();
                runEngine();
            });
        }

        function syncEditor() {
            const code = projectData[currentMode].files[currentFile];
            $('#editor').val(code);
            refreshHighlighter();
        }

        function refreshHighlighter() {
            const code = $('#editor').val();
            const lang = projectData[currentMode].lang;
            const highlightCode = $('#codeHighlight');
            highlightCode.attr('class', 'language-' + lang).text(code + (code.endsWith('\n') ? ' ' : ''));
            if (window.Prism) Prism.highlightElement(highlightCode[0]);
            $('.highlight-layer').scrollTop($('#editor').scrollTop()).scrollLeft($('#editor').scrollLeft());
        }

        function runEngine() {
            const data = projectData[currentMode];
            const code = $('#editor').val();
            const frame = $('#preview-frame');
            const terminal = $('#terminal-output');

            if (data.type === 'web') {
                terminal.hide(); frame.show();
                let doc = code;
                if (currentMode === 'react') {
                    doc = `<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1"><script src="https://cdn.tailwindcss.com"><\/script></head><body><div id="root"></div><script src="https://unpkg.com/react@18/umd/react.development.js"><\/script><script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"><\/script><script src="https://unpkg.com/@babel/standalone/babel.min.js"><\/script><script type="text/babel">${code.replace('export default ', '')} const root = ReactDOM.createRoot(document.getElementById('root')); root.render(<App />);<\/script></body></html>`;
                } else if (currentMode === 'css') {
                    doc = `<!DOCTYPE html><html><head><style>${code}<\/style><\/head><body><div class="box"></div><\/body></html>`;
                }
                frame.attr('srcdoc', doc);
                $('#output-type-label').text('Live View');
            } else {
                frame.hide(); terminal.show().html('<span class="text-indigo-400 font-bold text-[10px]">Processing via ByteShala Virtual Runtime...</span>\n');
                $('#output-type-label').text('Terminal Output');
                setTimeout(() => {
                    let log = "Process execution finished successfully.";
                    if (currentMode === 'sql') log = "Query OK, rows returned.\n+----+-----------------+\n| id | username        |\n+----+-----------------+\n| 1  | ByteShalaUser   |\n+----+-----------------+";
                    terminal.append(`<span class="text-emerald-400 font-bold">Success:</span>\n${log}`);
                }, 400);
            }
        }

        function goHome() { $('#compiler-view').hide(); $('#dashboard').fadeIn(200); }

        $(document).ready(() => {
            buildDashboard();

            $('#editor').on('input', function () {
                projectData[currentMode].files[currentFile] = this.value;
                refreshHighlighter();
            }).on('scroll', function () {
                $('.highlight-layer').scrollTop(this.scrollTop).scrollLeft(this.scrollLeft);
            });

            $('#runBtn').click(runEngine);
            $('#aiFixBtn').click(fixWithAI);
            $('#clearBtn').click(() => {
                $('#editor').val('').trigger('input');
                $('#preview-frame').attr('srcdoc', '');
                $('#terminal-output').html('');
            });
            $('#downloadBtn').click(() => {
                const blob = new Blob([$('#editor').val()], { type: 'text/plain' });
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = currentFile;
                a.click();
            });

            $(document).on('click', '.tab-btn', function () {
                $('.tab-btn').removeClass('active'); $(this).addClass('active');
                currentFile = $(this).data('file'); syncEditor();
            });

            let dragging = false;
            $('#drag-bar').mousedown(() => dragging = true);
            $(document).mousemove(e => {
                if (!dragging || window.innerWidth < 1024) return;
                let p = (e.clientX / window.innerWidth) * 100;
                if (p > 20 && p < 80) $('#left-col').css('width', p + '%');
            }).mouseup(() => dragging = false);
        });
    </script>
</body>

</html>
